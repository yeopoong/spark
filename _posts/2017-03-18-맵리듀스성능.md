## 맵리듀스 성능 

* 맵리듀스 잡은 수행되는 맵 태스크와 리듀스 태스크개수에 따라 성능에 영향을 받는다. 

* 블록 크기에 따른 맵 태스트 수

입력 파일|블록크기|맵 태스크 수
:------:|:------:|:---------:
100GB|32MB|(100 * 1024) / 32 = 3200
100GB|64MB|(100 * 1024) / 64 = 1600

* 태스크트래커의 태스크 실행 개수 설정 파라미터

`mapred-site.xml`
```
mapred.tasktracker.map.tasks.maximum 2
mapred.tasktracker.reduce.tasks.maximum 2
```

* 맵 태스크가 CPU 75% 이하를 사용할 경우 최대 태스크 개수를 CPU 개수보다 약간 초과해서 설정한다.
* CPU 코어가 8개일 경우 최대 태스크 개수 10개
: 8 맵 태스크, 2 리듀스 태스크
: 7 맵 태스크, 3 리듀스 태스크


* 적정 리듀스 태스크 개수  
0.95 * 데이터노드 개수 ~ 1.75 * 데이터노드 개수 

## distcp 

```
$ hadoop distcp -Ddfs.block.size=$[MB * 1024 * 1024] [입력경로] [출력경로]
```

```
#! /bin/bash

for year in `seq 1987 2008`
do
  hadoop distcp -Ddfs.block.size=$[32*1024*1024] /usr/hadoop/input/$year.csv /usre/hadoop/output/$year.csv
done
```